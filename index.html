

<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interaktive Rom-Karte</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        display: flex;
        height: 100vh;
        flex-direction: row;
    }

    #map {
        flex: 3;
        position: relative;
    }

    #coords-display {
        position: absolute;
        bottom: 10px;
        left: 10px;
        background: rgba(255,255,255,0.85);
        padding: 6px 10px;
        border-radius: 4px;
        font-size: 14px;
        border: 1px solid #aaa;
        z-index: 1000;
    }

    #sidebar {
        flex: 1;
        padding: 10px;
        overflow-y: auto;
        background: #f5f5f5;
        border-left: 2px solid #ccc;
    }

    @media (max-width: 768px) {
        body {
            flex-direction: column;
        }
        #map {
            height: 50vh;
        }
        #sidebar {
            height: 50vh;
        }
    }

    .info-box {
        padding: 8px;
        background: white;
        border-radius: 6px;
        border: 1px solid #aaa;
        width: 220px;
    }

    .info-title {
        font-weight: bold;
        margin-bottom: 4px;
    }

    .info-date {
        font-size: 0.9em;
        color: #666;
        margin-bottom: 6px;
    }
</style>
</head>

<body>

<div id="map">
    <div id="coords-display">Koordinaten: –</div>
</div>

<div id="sidebar">
    <h3>Filter</h3>

    <label><input type="checkbox" class="filter-symbol" value="tempel" checked> Tempel</label><br>
    <label><input type="checkbox" class="filter-symbol" value="thermen" checked> Thermen</label><br>
    <label><input type="checkbox" class="filter-symbol" value="strassen" checked> Straßen</label><br>
    <label><input type="checkbox" class="filter-symbol" value="foren" checked> Foren</label><br>
    <label><input type="checkbox" class="filter-symbol" value="kaiserzeit" checked> Kaiserzeit</label><br>
    <label><input type="checkbox" class="filter-symbol" value="republik" checked> Republik</label><br>
    <label><input type="checkbox" class="filter-symbol" value="sonstiges" checked> Sonstiges</label><br>

    <h4>Zeitauswahl</h4>
    <select id="time-filter">
        <option value="all">Alle</option>
        <option value="jahrhundert-1">1. Jh. v. Chr.</option>
        <option value="jahrhundert0">1. Jh. n. Chr.</option>
        <option value="jahrhundert1">2. Jh. n. Chr.</option>
        <option value="jahrhundert2">3. Jh. n. Chr.</option>
        <option value="jahrzehnt70">70er Jahre n. Chr.</option>
        <option value="jahrzehnt80">80er Jahre n. Chr.</option>
        <option value="jahrzehnt120">120er Jahre n. Chr.</option>
    </select>

    <h4>Admin</h4>
    <label>
        <input type="checkbox" id="admin-mode">
        Admin-Modus aktivieren
    </label>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>

// ------------------------------------------------------------
// 1. Karte initialisieren
// ------------------------------------------------------------
const map = L.map('map');

map.fitBounds([
    [41.9400, 12.4300],
    [41.8600, 12.5800]
]);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
}).addTo(map);


// ------------------------------------------------------------
// 2. Koordinatenanzeige
// ------------------------------------------------------------
const coordsDisplay = document.getElementById('coords-display');

map.on('mousemove', function(e) {
    coordsDisplay.textContent =
        `Koordinaten: ${e.latlng.lat.toFixed(5)}, ${e.latlng.lng.toFixed(5)}`;
});

map.on('click', function(e) {
    coordsDisplay.textContent =
        `Koordinaten: ${e.latlng.lat.toFixed(5)}, ${e.latlng.lng.toFixed(5)}`;
});

// ------------------------------------------------------------
// 3. Icons
// ------------------------------------------------------------
const icons = {
    tempel: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/3176/3176298.png', iconSize: [32,32] }),
    thermen: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/854/854878.png', iconSize: [32,32] }),
    strassen: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/684/684908.png', iconSize: [32,32] }),
    foren: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/3176/3176298.png', iconSize: [32,32] }),
    kaiserzeit: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/1998/1998592.png', iconSize: [32,32] }),
    republik: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/1998/1998584.png', iconSize: [32,32] }),
    sonstiges: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/1828/1828884.png', iconSize: [32,32] })
};

// ------------------------------------------------------------
// 4. Beispielpunkte
// ------------------------------------------------------------
const points = [
    {
        coords: [41.8902, 12.4922],
        title: "Kolosseum",
        date: "80 n. Chr.",
        text: "Das größte Amphitheater der Antike. <br><a href='https://de.wikipedia.org/wiki/Kolosseum' target='_blank'>Mehr Infos</a>",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Colosseo_2020.jpg/320px-Colosseo_2020.jpg",
        symbol: "kaiserzeit",
        time: "jahrzehnt80"
    },
    {
        coords: [41.8925, 12.4853],
        title: "Forum Romanum",
        date: "1. Jh. v. Chr.",
        text: "Politisches Zentrum der römischen Republik. <br><a href='https://de.wikipedia.org/wiki/Forum_Romanum' target='_blank'>Ausführliche Beschreibung</a>",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Forum_Romanum_Rome_Italy.jpg/320px-Forum_Romanum_Rome_Italy.jpg",
        symbol: "foren",
        time: "jahrhundert-1"
    },
    {
        coords: [41.9031, 12.4958],
        title: "Pantheon",
        date: "125 n. Chr.",
        text: "Tempel für alle Götter. <br><a href='https://de.wikipedia.org/wiki/Pantheon_(Rom)' target='_blank'>Mehr Infos</a>",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Pantheon_Rome_2020.jpg/320px-Pantheon_Rome_2020.jpg",
        symbol: "tempel",
        time: "jahrzehnt120"
    },
    {
        coords: [41.9009, 12.4833],
        title: "Via del Corso (antike Via Lata)",
        date: "römische Kaiserzeit",
        text: "Wichtige Nord-Süd-Achse durch Rom, auf antiker Trasse. Freitext-Beispiel mit Hinweis auf Stadtentwicklung.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Via_del_Corso_Rome.jpg/320px-Via_del_Corso_Rome.jpg",
        symbol: "strassen",
        time: "jahrhundert1"
    },
    {
        coords: [41.9010, 12.4963],
        title: "Thermen des Nero (vermutete Lage)",
        date: "1. Jh. n. Chr.",
        text: "Frühe kaiserzeitliche Thermenanlage, heute überbaut. <br><a href='https://de.wikipedia.org/wiki/Nerothermen' target='_blank'>Hypothetische Rekonstruktionen</a>",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Rome_Thermae.jpg/320px-Rome_Thermae.jpg",
        symbol: "thermen",
        time: "jahrhundert0"
    }, 
	{
        coords: [41.89508, 12.47675],
        title: "Katzenasyl Torre Argentina",
        date: "2026 n. Chr.",
        text: "Unsere Katzis  <br><a href='https://www.gattidiroma.net/web/it' target='_blank'>Mehr Infos</a>",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Colosseo_2020.jpg/320px-Colosseo_2020.jpg",
        symbol: "kaiserzeit",
        time: "jahrhunder20"
    },


    {
        coords: [41.8922, 12.4790],
        title: "Theater des Marcellus",
        date: "13 v. Chr.",
        text: "Theaterbau aus der späten Republik / frühen Kaiserzeit, später in Wohnbebauung integriert.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Teatro_di_Marcello_Roma.jpg/320px-Teatro_di_Marcello_Roma.jpg",
        symbol: "republik",
        time: "jahrhundert-1"
    },
    
        {
        coords: [41.8986, 12.4768],
        title: "Engelsburg (Mausoleum des Hadrian)",
        date: "139 n. Chr.",
        text: "Mausoleum, später Festung und Papstresidenz. <br><a href='https://de.wikipedia.org/wiki/Engelsburg_(Rom)' target='_blank'>Mehr Infos</a>",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Castel_Sant%27Angelo_Rome.jpg/320px-Castel_Sant%27Angelo_Rome.jpg",
        symbol: "sonstiges",
        time: "jahrhundert2"
    }
    
];

// ------------------------------------------------------------
// 5. Marker erzeugen
// ------------------------------------------------------------
let markers = [];

points.forEach(p => {
    const marker = L.marker(p.coords, { icon: icons[p.symbol] });

    const box = `
        <div class="info-box">
            <div class="info-title">${p.title}</div>
            <div class="info-date">${p.date}</div>
            <img src="${p.img}" width="200"><br>
            ${p.text}
        </div>
    `;

    marker.bindPopup(box);
    marker.addTo(map);

    markers.push({ marker, symbol: p.symbol, time: p.time });
});

// ------------------------------------------------------------
// 6. Filterfunktion
// ------------------------------------------------------------
function applyFilters() {
    const activeSymbols = [...document.querySelectorAll('.filter-symbol:checked')]
        .map(cb => cb.value);

    const timeFilter = document.getElementById('time-filter').value;

    markers.forEach(obj => {
        const visibleSymbol = activeSymbols.includes(obj.symbol);
        const visibleTime = (timeFilter === "all" || obj.time === timeFilter);

        if (visibleSymbol && visibleTime) {
            if (!map.hasLayer(obj.marker)) obj.marker.addTo(map);
        } else {
            if (map.hasLayer(obj.marker)) map.removeLayer(obj.marker);
        }
    });
}

// Event-Listener
document.querySelectorAll('.filter-symbol')
    .forEach(cb => cb.addEventListener('change', applyFilters));

document.getElementById('time-filter')
    .addEventListener('change', applyFilters);

// ------------------------------------------------------------
// 7. Admin-Modus: Marker setzen
// ------------------------------------------------------------
const adminToggle = document.getElementById('admin-mode');

map.on('click', function(e) {
    if (!adminToggle.checked) return;

    const lat = e.latlng.lat.toFixed(5);
    const lng = e.latlng.lng.toFixed(5);

    const example = `
{
    coords: [${lat}, ${lng}],
    title: "NEUER TITEL",
    date: "DATUM / JAHR",
    text: "Freitext. <a href='#' target='_blank'>Link</a>",
    img: "BILD-URL",
    symbol: "tempel",
    time: "jahrhundert1"
}
    `.trim();

    L.marker([lat, lng]).addTo(map)
        .bindPopup(
            "<b>Neuer Marker gesetzt</b><br><br>" +
            "Kopiere diesen Block:<br><br>" +
            `<textarea style='width:100%;height:180px;'>${example}</textarea>`
        )
        .openPopup();
});

</script>
</body>
</html>
