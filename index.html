

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Rom – Historische Karte< 1/title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link 
        rel="stylesheet" 
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    >

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        #map {
            width: 100vw;
            height: 100vh;
        }

        .popup-img {
            width: 100%;
            border-radius: 6px;
            margin-bottom: 6px;
        }

        #timeline {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            z-index: 1000;
        }
    </style>
</head>
<body>

<div id="map"></div>

<input type="range" id="timeline" min="-700" max="2025" value="2025">

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// ------------------------------------------------------------
// 1. Hilfsfunktion
// ------------------------------------------------------------
function yearToDecimal(year) {
    return year;
}

// ------------------------------------------------------------
// 2. Icons
// ------------------------------------------------------------
const iconBase = (color) => L.divIcon({
    html: `<div style="
        width:14px;
        height:14px;
        background:${color};
        border-radius:50%;
        border:2px solid white;
        box-shadow:0 0 4px rgba(0,0,0,0.4);
    "></div>`,
    className: "",
    iconSize: [14, 14]
});

const icons = {
    kaiserzeit: iconBase("#d9534f"),
    republik: iconBase("#5bc0de"),
    foren: iconBase("#5cb85c"),
    tempel: iconBase("#f0ad4e"),
    strassen: iconBase("#0275d8"),
    thermen: iconBase("#9b59b6"),
    sonstiges: iconBase("#7f8c8d")
};

// ------------------------------------------------------------
// 3. Marker-Daten
// ------------------------------------------------------------
const points = [
    {
        coords: [41.8902, 12.4922],
        title: "Kolosseum",
        date: "80 n. Chr. – heute",
        startValue: yearToDecimal(80),
        endValue: yearToDecimal(new Date().getFullYear()),
        text: "Das größte Amphitheater der Antike.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Colosseo_2020.jpg/320px-Colosseo_2020.jpg",
        symbol: "kaiserzeit"
    },
    {
        coords: [41.8925, 12.4853],
        title: "Forum Romanum",
        date: "7.–5. Jh. v. Chr.",
        startValue: yearToDecimal(-700),
        endValue: yearToDecimal(-401),
        text: "Politisches Zentrum der frühen römischen Geschichte.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Forum_Romanum_Rome_Italy.jpg/320px-Forum_Romanum_Rome_Italy.jpg",
        symbol: "foren"
    },
    {
        coords: [41.89858, 12.47683],
        title: "Pantheon",
        date: "125 n. Chr. – heute",
        startValue: yearToDecimal(125),
        endValue: yearToDecimal(new Date().getFullYear()),
        text: "Tempel für alle Götter.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Rome_Pantheon_front.jpg/320px-Rome_Pantheon_front.jpg",
        symbol: "tempel"
    },
    {
        coords: [41.90047, 12.48230],
        title: "Via del Corso",
        date: "1.–3. Jh. n. Chr.",
        startValue: yearToDecimal(0),
        endValue: yearToDecimal(300),
        text: "Wichtige Nord-Süd-Achse durch Rom.",
        img: "https://github.com/Trimalcione/rom-bilder/blob/main/argentina.jpg?raw=true",
        symbol: "strassen"
    },
    {
        coords: [41.9010, 12.4963],
        title: "Thermen des Nero",
        date: "1. Jh. n. Chr.",
        startValue: yearToDecimal(0),
        endValue: yearToDecimal(100),
        text: "Frühe kaiserzeitliche Thermenanlage.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Rome_Thermae.jpg/320px-Rome_Thermae.jpg",
        symbol: "thermen"
    },
    {
        coords: [41.89508, 12.47675],
        title: "Katzenasyl Torre Argentina",
        date: "1980 – heute",
        startValue: yearToDecimal(1980),
        endValue: yearToDecimal(new Date().getFullYear()),
        text: "Unsere Katzis.",
        img: "https://github.com/Trimalcione/rom-bilder/blob/main/argentina.jpg?raw=true",
        symbol: "sonstiges"
    },
    {
        coords: [41.8922, 12.4790],
        title: "Theater des Marcellus",
        date: "13 v. Chr. – heute",
        startValue: yearToDecimal(-13),
        endValue: yearToDecimal(new Date().getFullYear()),
        text: "Theaterbau aus der späten Republik.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Teatro_di_Marcello_Roma.jpg/320px-Teatro_di_Marcello_Roma.jpg",
        symbol: "republik"
    },
    {
        coords: [41.90300, 12.46656],
        title: "Engelsburg",
        date: "139 n. Chr. – heute",
        startValue: yearToDecimal(139),
        endValue: yearToDecimal(new Date().getFullYear()),
        text: "Mausoleum, später Festung und Papstresidenz.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Castel_Sant%27Angelo_Rome.jpg/320px-Castel_Sant%27Angelo_Rome.jpg",
        symbol: "kaiserzeit"
    }
];

// ------------------------------------------------------------
// 4. Karte
// ------------------------------------------------------------
const map = L.map("map").setView([41.893, 12.482], 14);

L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 19
}).addTo(map);

// ------------------------------------------------------------
// 5. Marker
// ------------------------------------------------------------
const markerLayer = L.layerGroup().addTo(map);

function updateMarkers(currentYear) {
    markerLayer.clearLayers();

    points.forEach(p => {
        if (currentYear >= p.startValue && currentYear <= p.endValue) {
            const marker = L.marker(p.coords, { icon: icons[p.symbol] });

            const popupHTML = `
                <img src="${p.img}" class="popup-img">
                <strong>${p.title}</strong><br>
                <em>${p.date}</em><br><br>
                ${p.text}
            `;

            marker.bindPopup(popupHTML);
            marker.addTo(markerLayer);
        }
    });
}

// ------------------------------------------------------------
// 6. Timeline
// ------------------------------------------------------------
const timeline = document.getElementById("timeline");

timeline.addEventListener("input", () => {
    updateMarkers(parseInt(timeline.value));
});

updateMarkers(parseInt(timeline.value));
</script>

</body>
</html>
