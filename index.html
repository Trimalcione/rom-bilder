tml

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Rom – Historische Karte</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link 
        rel="stylesheet" 
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    >

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        #map {
            width: 100vw;
            height: 100vh;
        }

        /* Popup-Bild */
        .popup-img {
            width: 100%;
            border-radius: 6px;
            margin-bottom: 6px;
        }

        /* Timeline-Slider */
        #timeline {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            z-index: 1000;
        }
    </style>
</head>
<body>

<div id="map"></div>

<!-- Timeline -->
<input type="range" id="timeline" min="-700" max="2025" value="2025">

<!-- Leaflet JS -->
<script 
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
</script>

<script>
// ------------------------------------------------------------
// 1. Hilfsfunktion: Jahr → Dezimalwert
// ------------------------------------------------------------
function yearToDecimal(year) {
    return year;
}

// ------------------------------------------------------------
// 2. Icons (einfaches Beispiel)
// ------------------------------------------------------------
const iconBase = (color) => L.divIcon({
    html: `<div style="
        width:14px;
        height:14px;
        background:${color};
        border-radius:50%;
        border:2px solid white;
        box-shadow:0 0 4px rgba(0,0,0,0.4);
    "></div>`,
    className: "",
    iconSize: [14, 14]
});

const icons = {
    kaiserzeit: iconBase("#d9534f"),
    republik: iconBase("#5bc0de"),
    foren: iconBase("#5cb85c"),
    tempel: iconBase("#f0ad4e"),
    strassen: iconBase("#0275d8"),
    thermen: iconBase("#9b59b6"),
    sonstiges: iconBase("#7f8c8d")
};

// ------------------------------------------------------------
// 3. Marker-Daten (Version 1.1)
// ------------------------------------------------------------
const points = [
    {
        coords: [41.8902, 12.4922],
        title: "Kolosseum",
        date: "80 n. Chr. – heute",
        startValue: yearToDecimal(80),
        endValue: yearToDecimal(new Date().getFullYear()),
        text: "Das größte Amphitheater der Antike.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Colosseo_2020.jpg/320px-Colosseo_2020.jpg",
        symbol: "kaiserzeit"
    },
    {
        coords: [41.8925, 12.4853],
        title: "Forum Romanum",
        date: "7.–5. Jh. v. Chr.",
        startValue: yearToDecimal(-700),
        endValue: yearToDecimal(-401),
        text: "Politisches Zentrum der frühen römischen Geschichte.",
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Forum_Romanum_Rome_Italy.jpg/320px-Forum_Romanum_Rome_Italy.jpg",
        symbol: "foren"
    },
    {
        coords: [41.89858, 12.47683],
        title: "Pantheon",
        da
